package com.marcosapps.vendedoresml.Taskimport android.os.AsyncTaskimport com.marcosapps.vendedoresml.Banco.PersonQueriesimport com.marcosapps.vendedoresml.ModelsTO.UsersPersonTOimport com.marcosapps.vendedoresml.Request.BuscarPersonRequestimport com.marcosapps.vendedoresml.Utils.DialogCustomimport com.marcosapps.vendedoresml.Views.SearchPersonActivityimport org.json.JSONObjectimport java.lang.ref.WeakReferenceclass BuscarPersonUsuario(context: SearchPersonActivity) : AsyncTask<Int, Void, JSONObject>() {    private val activityReference: WeakReference<SearchPersonActivity> = WeakReference(context)    private var result: JSONObject? = null    override fun onPreExecute() {        super.onPreExecute()    }    override fun doInBackground(vararg params: Int?): JSONObject? {        val user = params[0]        val buscarPersonRequest = BuscarPersonRequest()        val personJson: JSONObject? = buscarPersonRequest.executePersonRequest(user)        return personJson    }    override fun onPostExecute(result: JSONObject?) {        super.onPostExecute(result)        this.result = result        val activity = activityReference.get()        activity?.isPlay = true        if (activity != null) {            if (result == null) {                DialogCustom().DialogMessage(activity, "Vendedor nao possui perfil de vendedor",                        "vendedor nao possui conta de vendedor");                //activity.animation_search.visibility = View.GONE                //activity.cardMain.visibility = View.VISIBLE            }            else                if (true) {                val personTO = UsersPersonTO(result)                val personuser = personTO.getPersonFromJson()                PersonQueries(activity).InsertDbPerson(personuser)            }        }    }}